<a [routerLink]="['/movie', id()]" class="group block rounded-lg overflow-hidden bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800 hover:ring-brand-600/60 transition">
  <div class="relative aspect-[2/3] bg-gray-100 dark:bg-gray-800 w-[180px]">
    @if (posterPath()) {
      <img [src]="'https://image.tmdb.org/t/p/w342' + posterPath()" [alt]="title()" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-[1.03]" loading="lazy" />
    } @else {
      <div class="w-full h-full flex items-center justify-center text-gray-400">No Image</div>
    }
    
    <!-- Watchlist Button -->
    <button 
      (click)="toggleWatchlist($event)"
      class="absolute top-2 right-2 p-1.5 rounded-full bg-white/90 dark:bg-gray-900/80 backdrop-blur shadow hover:bg-white dark:hover:bg-gray-900 transition-colors z-10"
      [attr.aria-label]="isInWatchlist() ? 'Remove from watchlist' : 'Add to watchlist'"
    >
      @if (isInWatchlist()) {
        <svg class="w-4 h-4 text-brand-600 fill-current" viewBox="0 0 24 24">
          <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
        </svg>
      } @else {
        <svg class="w-4 h-4 text-gray-600 dark:text-gray-400 hover:text-brand-600 dark:hover:text-brand-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
        </svg>
      }
    </button>
    
    <!-- Rating -->
    <div class="absolute top-2 left-2 rounded-full bg-white/90 dark:bg-gray-900/80 backdrop-blur px-2 py-0.5 text-xs font-medium shadow">
      ‚≠ê {{ voteAverage() | number:'1.1-1' }}
    </div>
  </div>
  @if (!compact()) {
    <div class="p-3">
      <div class="font-semibold leading-snug line-clamp-2 group-hover:text-brand-700 dark:group-hover:text-brand-50">{{ title() }}</div>
      <div class="mt-1 text-xs text-gray-600 dark:text-gray-400">{{ releaseYear() }}</div>
    </div>
  }
</a> 